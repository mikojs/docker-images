name: build
on: [push]
jobs:
  build-images:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: create config folder
        run: |
          if [[ ! -d config ]]; then
            mkdir config

            for file in $(ls); do
              if [[ -f $file/Dockerfile ]]; then
                mkdir config/$file
              fi
            done
          fi
      - name: build images
        run: |
          for file in $(ls); do
            if [[ -f $file/Dockerfile ]]; then
              docker build -t $file -f ./$file/Dockerfile .
            fi
          done
